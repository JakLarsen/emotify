<!DOCTYPE html>
<html lang="en">

<head>

  <!-- META -->
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- TITLE -->
  <title>Emotify</title>

  <!-- FONTS -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;300;400;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- LINKS -->
  <link rel="stylesheet" href="/static/css/styles.css">
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
  <script src="../static/js/jquery.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.0.4/socket.io.js" integrity="sha512-aMGMvNYu8Ue4G+fHa359jcPb1u+ytAF+P2SCb+PxrjCdO3n3ZTxJ30zuH39rimUggmTwmh2u7wvQsDTHESnmfQ==" crossorigin="anonymous"></script>
    
  <script type="text/javascript" charset="utf-8">
      function update_page(input, logNum){
          //called when data_response handler receives an event (in intervals from server side)
          //updates page based on push, pull, or neutral input received
          if (input == 'push'){
              $('#log').append('<br>' + $('<div/>').text('PAGE UPDATED ON PUSH COMMAND').html());
              // $('#mid-mid-con').css('background-color', 'blue');
              // nextEvent()
          }
          else if (input == 'pull'){
              $('#log').append('<br>' + $('<div/>').text('PAGE UPDATED ON PULL COMMAND').html());
              // $('#mid-mid-con').css('background-color', 'yellow');
              // prevEvent()
          }
          else{
              $('#log').append('<br>' + $('<div/>').text('PAGE UPDATED ON NEUTRAL COMMAND').html());
              $('#mid-mid-con').css('background-color', 'red');
              nextEvent()
              // playPauseEvent()
          }
      }
      $(document).ready(function() {
          // Connect to the Socket.IO server.
          var socket = io();

          // Event handler for new connections.
          // The callback function is invoked when a connection with the
          // server is established.
          socket.on('connect', function() {
              socket.emit('my_event', {data: 'I\'m connected!'});
          });

          // Event handler for server sent data.
          // The callback function is invoked whenever the server emits data
          // to the client with the 'my_response' identifier. The data is then displayed in the "Received"
          // section of the page.
          socket.on('my_response', function(msg, cb) {
              $('#log').append('<br>' + $('<div/>').text('Received #' + msg.count + ': ' + msg.data).html());
              if (cb)
                  cb();
          });

          // Event handler for Headset sent data (Handled by server).
          // The callback function is invoked whenever the server emits data
          // to the client with the 'data_response' identifier. The data is then displayed in the "Received"
          // section of the page.
          socket.on('data_response', function(msg, cb) {
              $('#log').append('<br>' + $('<div/>').text('HEADSET #' + msg.count + ':' + ' Input: ' + msg.input + '. Data: ' + msg.data).html());
              if (cb)
                  cb();
              update_page(msg.input)
          });


          $('form#display-data').submit(function(event){
              socket.emit('display_data_request', {data: ('Clicked to display realtime data or send input to server.')});
              return false;
          });
          $('form#disconnect').submit(function(event) {
              socket.emit('disconnect_request');
              return false;
          });
      });
  </script>

</head>



<body>

  <div id="body">
    <div id="main-con">

      <div id="left-con">
        <div id="top-left-con">
          <div id="logo-wrap">
            <div id="icon"><img id="icon-img" src="/static/img/logore1.png"/></div>
            <div id="icon-title"><i><span id="icon-title-link">Emotify</span></i></div>
          </div>
          <div id="home-wrap" class="tl-wrap">
              <span id="tl-search-btn-wrap" class="link-btn-wrap">
                <div id="tl-create-search-btn" class="link-btn">
                  <div id="search-icon" class="tl-icon"><img id="search-img" class="icon-img" src="/static/img/search1.png"/></div>
                  <div id="tl-search" class="tl-desc">Home</div>
                </div>
              </span>  
          </div>
          <div id="library-wrap" class="tl-wrap">
              <span id="tl-library-btn-wrap" class="link-btn-wrap">
                <div id="tl-create-library-btn" class="link-btn">
                  <div id="library-icon" class="tl-icon"><img id="library-img" class="icon-img" src="/static/img/songs1.png"/></div>
                  <div id="tl-library" class="tl-desc">Library</div>
                </div>
              </span>  
          </div>
          <div id="tl-playlist-wrap" class="tl-wrap">
              <span id="tl-playlist-btn-wrap" class="link-btn-wrap">
                <div id="tl-create-playlist-btn" class="link-btn">
                  <div id="tl-playlist-icon" class="tl-icon"><img id="playlist-img" class="icon-img" src="/static/img/playlists.png"/></div>
                  <div id="tl-playlist" class="tl-desc">Your Playlists</div>
                </div>
              </span>  
          </div>
          <div id="tl-border"></div>
        </div>
        <div id="mid-left-con">
          <div id="ml-create-playlist-wrap" class="tl-wrap">
            <form id="ml-create-playlist-form" action="/create-playlist">
              <span id="ml-create-playlist-btn-wrap">
                <button id="ml-create-playlist-btn">
                  <div id="ml-plus-icon" class="tl-icon"><img id="plus-img" class="icon-img" src="/static/img/plus_bl.png"/></div>
                  <div id="ml-plus-desc" class="tl-desc">Create Playlist</div>
                </button>
              </span>  
            </form>
          </div>
          <div id="ml-playlist-con">
            {% for playlist in my_playlists %}
              {% if playlist.title != 'Library' %}
                <div id="ml-playlist-wrap">
                  <div class="ml-playlist" id="mid-playlist-{{playlist.id}}">{{playlist.title}}</div>
                  <form class="ml-del-btn-form" action="/playlist/{{playlist.id}}/delete">
                    <button class="ml-del-btn">X</button>
                  </form>
                </div>
              {% endif %}
            {% endfor %}
          </div>
        </div>
        <div id="bl-spacer"></div>
        <div id="bot-left-con">
          <div id="bl-border"></div>
          <div id="bl-add-song-wrap">
            <div id="bl-add-song-title">Add Song To Library</div>
            <form id="bl-add-song-form" action="/add-song">
              <span id="bl-add-song-btn-wrap">
                <button id="bl-add-song-btn">New Song</button>
              </span>  
            </form>
          </div>
        </div>
      </div>
      <div id="mid-con">
        <div id="top-mid-con">
          <div id="mid-welcome">Welcome back, {{g.user.username | title}}.</div>
          <div id="top-mid-right-wrap">
            <div id="mid-connect">
              <span id="connect-headset" class="mid-con-link">Connect Headset<img id="hs-img-top" class="hs-img" src="../static/img/hs2.png"></span>
            </div>
          <div class="ball-spacer"></div>
          <div id="mid-logout"><a class="mid-con-link" href="/logout">Logout</a></div>
          </div>
        </div>
        <div id="mid-mid-con">
          {% block content %}
          <div id="home-con" class="template-con">
            <div id="home-top" class="template-top">
              <div id="home-tl" class="template-tl">
                <img id="home-img"  class="template-img" src="https://i.redd.it/jt3kkegbrb661.jpg">
              </div>
              <div id="home-tr" class="template-tr">
                <div id="home-banner" class="">Nice to see you</div>
                <div id="home-caption" class="template-caption">Your music. At the ease of thought.</div>
              </div>
            </div>
            <div id="home-bot">
              <div id="home-fav-music-con">
                <div id="home-fav-music-banner" class="home-banner">Some familiar sounds</div>
                <div id="home-fav-music-wrap">
                  <div id="home-favorites-con">
                    <div id="home-fav-music-top-wrap">
                      <div id="home-fav-music-img-wrap">
                        <img id="home-fav-music-img-1" class="home-fav-music-img" src="https://i.redd.it/jt3kkegbrb661.jpg">
                        <img id="home-fav-music-img-2" class="home-fav-music-img" src="https://i.pinimg.com/originals/7a/36/b2/7a36b24f8bc4a6b87823e75534fcad19.jpg">
                        <img id="home-fav-music-img-3" class="home-fav-music-img" src="https://i.pinimg.com/originals/7a/36/b2/7a36b24f8bc4a6b87823e75534fcad19.jpg">
                        <img id="home-fav-music-img-4" class="home-fav-music-img" src="https://i.redd.it/jt3kkegbrb661.jpg">
                      </div>
                      <div id="home-fav-music-artists-wrap">
                        <div id="home-fav-music-artist-1" class="home-fav-music-title">Guns N' Roses</div>
                        <div id="home-fav-music-artist-2" class="home-fav-music-title">AC/DC</div>
                        <div id="home-fav-music-artist-3" class="home-fav-music-title">Above and Beyond</div>
                        <div id="home-fav-music-artist-4" class="home-fav-music-title">Ludovico Einaudi</div>
                        <div id="home-fav-music-artist-5" class="home-fav-music-title">The Who</div>
                      </div>
                    </div>
                    <div id="home-fav-music-caption">Your liked music</div>
                  </div>
                  <div id="home-most-played-con">
                    <div id="home-most-played-top-wrap">
                      <div id="home-most-played-img-wrap">
                        <img id="home-most-played-img-1" class="home-fav-music-img" src="https://upload.wikimedia.org/wikipedia/en/thumb/a/a2/The_Who_-_Greatest_Hits.jpg/220px-The_Who_-_Greatest_Hits.jpg">
                        <img id="home-most-played-img-2" class="home-fav-music-img" src="https://upload.wikimedia.org/wikipedia/en/4/42/Beatles_-_Abbey_Road.jpg">
                        <img id="home-most-played-img-3" class="home-fav-music-img" src="https://static01.nyt.com/images/2019/11/13/obituaries/11Freeman3/merlin_164214771_c6e96bd0-0579-49ea-82ff-a1962f393153-articleLarge.jpg?quality=75&auto=webp&disable=upscale">
                        <img id="home-most-played-img-4" class="home-fav-music-img" src="https://i1.sndcdn.com/artworks-000104318939-99u92i-t500x500.jpg">
                      </div>
                      <div id="home-most-played-artists-wrap">
                        <div id="home-most-played-artist-1" class="home-fav-music-title">Thunderstruck</div>
                        <div id="home-most-played-artist-2" class="home-fav-music-title">Nuvole Bianche</div>
                        <div id="home-most-played-artist-3" class="home-fav-music-title">Northern Soul</div>
                        <div id="home-most-played-artist-4" class="home-fav-music-title">You Only Get What You Give</div>
                        <div id="home-most-played-artist-5" class="home-fav-music-title">Take Me Home Tonight</div>
                      </div>
                    </div>
                    <div id="home-most-played-caption">Most played songs</div>
                  </div>
                </div>
              </div>  
              <div id="home-your-playlists-con">
                <div id="home-your-playlists-banner" class="home-banner">Your Playlists</div>
                <div id="home-your-playlists-wrap">
                  {% for playlist in my_playlists %}
                  <div class="home-your-playlist-playlist" id="home-playlist-{{playlist.id}}">
                    <img id="home-playlist-img-{{playlist.id}}" class="home-your-playlist-img" src="{{playlist.img}}">
                    <div id="home-playlist-title-{{playlist.id}}" class="home-your-playlist-title">{{playlist.title}}</div>
                  </div>
                  {% endfor %}
                </div>
              </div>
            </div>
          </div>
          {% endblock %}
        </div>
        <div id="bm-spacer"></div>
        <div id="bot-mid-con">
          <div id="prev-playing-con" class="song-player-con" data-pll="" data-songidx="" data-songid="" data-containertype="prev-btn" data-duration="">
            <audio id="" data-pos="prev" class="audio prev-audio" src=''></audio>
            <img id="prev-playing-song-img" class="song-player-img" src=''>
            <div id="prev-playing-text-wrap" class="song-player-text-wrap">
              <div id="prev-playing-song-title" class="song-player-title"></div>
              <div id="prev-playing-song-artist" class="song-player-artist"></div>
            </div>
            <img id="prev-song-heart" class="like-heart" src="">
            <img id="hs-img-audio" class="hs-img" src="../static/img/hs2.png">
          </div>
          <div id="curr-song-audio-control-con" data-pll="" data-songidx="" data-songid="" data-songpl="" data-containertype="play-pause-btn" data-duration="">
            <audio id="" data-pos="curr" class="audio curr-audio" src=''></audio>
            <div id="curr-playing-con">
              <img id="curr-playing-song-img" src="">
              <div id="curr-playing-text-wrap">
                <div id="curr-playing-song-title"></div>
                <div id="curr-playing-song-artist"></div>
              </div>
              <img id="curr-song-heart" class="like-heart" src="">
              <img id="hs-img-audio" class="hs-img" src="../static/img/hs2.png">
            </div>
            <div id="audio-controls-con">
              <div id="audio-controls-wrap">
                <div id="prev-btn-con" class="audio-control-con">
                  <div id="prev-btn" class="audio-control-items"><</div>
                </div>
                <div id="play-pause-con" class="audio-control-con">
                  <div id="play-pause" class="audio-control-items">></div>
                </div>
                <div id="next-btn-con" class="audio-control-con">
                  <div id="next-btn" class="audio-control-items">></div>
                </div>
              </div>
              <div id="duration-bar">
                <span id="elapsed">0:00</span> 
                <span id="bar">----------------------------------------------------------------------------</span> 
                <span id="end">0:00</span>
              </div>
            </div>
          </div>
          <div id="next-playing-con" class="song-player-con" data-pll="" data-songidx="" data-songid="" data-containertype="next-btn" data-duration="">
            <audio id="" data-pos="next" class="audio next-audio" src=''></audio>
            <img id="next-playing-song-img" class="song-player-img" src=''>
            <div id="next-playing-text-wrap" class="song-player-text-wrap">
              <div id="next-playing-song-title" class="song-player-title"></div>
              <div id="next-playing-song-artist" class="song-player-artist"></div>
            </div>
            <img id="next-song-heart" class="like-heart" src="">
            <img id="hs-img-audio" class="hs-img" src="../static/img/hs2.png">
          </div>
        </div>
      </div>
      <div id="right-con">
        <div id="top-right-con">
        </div>
        <div id="bot-right-con"></div>
      </div>
    </div>

  </div>

  
  <!-- SCRIPTS -->

  <script src="../../static/js/audio2.js"></script>
  <script src="../../static/js/app.js"></script>

</body>

</html>